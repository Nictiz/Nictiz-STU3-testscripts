<?xml version="1.0" encoding="UTF-8"?>
<variables xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
    <nts:variables href="phr-variables-taskId.xml"/>
    <variable>
        <name value="questionnaire-id"/>
        <expression value="Questionnaire.id"/>
        <sourceId value="questionnaire-fixture"/>
    </variable>
    <variable>
        <name value="questionnaireresponse-id"/>
        <expression value="Bundle.entry.select(resource as QuestionnaireResponse).id"/>
        <sourceId value="transaction-response"/>
    </variable>
    <variable>
        <name value="task-fullurl"/>
        <!-- Assume there's just one entry, which is a requirement for the test -->
        <expression value="entry[0].fullUrl"/>
        <sourceId value="search-response"/>
    </variable>
    <variable>
        <name value="server-base"/>
        <!-- TouchStone's replaceMatches() seems to be broken, as it returns a 
             boolean. So we have to do it the hardcoded way. -->
        <expression value="link.url.replace('Task?code=http%3A%2F%2Floinc.org%7C74468-0&amp;status=requested', '')"/>
        <sourceId value="search-response"/>
    </variable>
</variables>
