<?xml version="1.0" encoding="UTF-8"?>
<TestScript xmlns="http://hl7.org/fhir" xmlns:nts="http://nictiz.nl/xsl/testscript">
   <id value="mp9-ma-fhir3-0-2-xis-3-1"/>
   <url value="http://nictiz.nl/fhir/fhir3-0-1/TestScript/mp9-ma-fhir3-0-2-xis-3-1"/>
   <name value="Medication Process 9.0.7 - MediactionAgreement (NL: MedicatieAfspraak) - XIS Server - Scenario 3.1"/>
   <status value="active"/>
   <date value="2020-05-04"/>
   <publisher value="Nictiz"/>
   <contact>
      <name value="Nictiz"/>
      <telecom>
         <system value="email"/>
         <value value="kwalificatie@nictiz.nl"/>
         <use value="work"/>
      </telecom>
   </contact>
   <description value="Scenario 3.1 - Stop-medicatieafspraak, met reden staken&#xA;LET OP: stop medicatieafspraak van scenario 2.1"/>
   <origin>
      <index value="1"/>
      <profile>
         <system value="http://hl7.org/fhir/testscript-profile-origin-types"/>
         <code value="FHIR-Client"/>
      </profile>
   </origin>
   <destination>
      <index value="1"/>
      <profile>
         <system value="http://hl7.org/fhir/testscript-profile-destination-types"/>
         <code value="FHIR-Server"/>
      </profile>
   </destination>
   <!--<nts:fixture id="" href=""/>-->
   <!--<nts:variables href=""/>-->
   <!--<nts:includeDateT value=""/>-->
   <!--<setup><nts:actions href=""/></setup>-->
   <profile id="bundle-profile">
      <reference value="http://hl7.org/fhir/StructureDefinition/Bundle"/>
   </profile>
   <variable>
      <name value="patient-token-id"/>
      <defaultValue value="Bearer 29fe6dc3-deb8-4d5a-b7f1-a5e407e962d3"/>
      <description value="OAuth Token for current patient"/>
   </variable>
   <test id="mg-mgr-mg-MA-Scenarioset3-3-1">
      <name value="Scenario 3.1"/>
      <description value="Scenario 3.1 - Stop-medicatieafspraak, met reden staken&#xA;LET OP: stop medicatieafspraak van scenario 2.1"/>
      <action>
         <operation>
            <type>
               <system value="http://hl7.org/fhir/testscript-operation-codes"/>
               <code value="search"/>
            </type>
            <resource value="MedicationRequest"/>
            <description value="Test XIS server to serve MediactionAgreement (NL: MedicatieAfspraak) - Stop-medicatieafspraak, met reden staken&#xA;LET OP: stop medicatieafspraak van scenario 2.1"/>
            <accept value="xml"/>
            <destination value="1"/>
            <origin value="1"/>
            <params value="?category=http://snomed.info/sct|16076005&amp;_include=MedicationRequest:medication"/>
            <requestHeader>
               <field value="Authorization"/>
               <value value="${patient-token-id}"/>
            </requestHeader>
         </operation>
      </action>
      <action>
         <assert>
            <description value="Confirm that the operation was succesful"/>
            <operator value="in"/>
            <responseCode value="200,201"/>
         </assert>
      </action>
   </test>
   <!--<teardown><nts:actions href=""/></teardown>-->
</TestScript>
